<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
  <p>The delete user and user index api routes are restricted to users with the 'admin' role.</p>
  <div class="table-responsive">
      <table class="table table-hover text-center table-bordered">
      <thead>
        <tr>
            <td colspan="4">Info</td>
            <td colspan="2">Full Group</td>
            <td colspan="2">Small Group</td>
            <td colspan="2">Contributions</td>
            <td>Info</td>
        </tr>
        <tr>
            <td sort-arrow sortby='"name"' text='"Name"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"email"' text='"Email"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"role"' text='"Role"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"githubProfile"' text='"Github"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"full.normal"' text='"Attendance"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"full.bonus"' text='"Bonus"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"small.normal"' text='"Attendance"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"small.bonus"' text='"Bonus"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"github.events.length"' text='"Events"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"commits.length"' text='"Commits"' sortorder='sortorder'></td>
            <td sort-arrow sortby='"active"' text='"Active"' sortorder='sortorder'></td>
        </tr>
      </thead>
      <tbody>
          <tr ng-repeat="user in users | orderBy:sortorder">
              <td><a href="/users/{{user._id}}/profile">{{ user.name }}</a></td>
              <td> {{ user.email }}</td>
              <td>
              <select class="form-control" ng-model="user.role" ng-change="updateUserRole(user)">
                    <option value="user">User</option>
                    <option value="mentor">Mentor</option>
                    <option value="admin">Admin</option>
                </select>
              </td>
              <td><a ng-href="http://github.com/{{user.githubProfile}}">{{user.githubProfile}}</a></td>
              <td>{{ user.full.normal }}</td>
              <td>{{ user.full.bonus }}</td>
              <td>{{ user.small.normal }}</td>
              <td>{{ user.small.bonus }}</td>
              <td>{{ user.github.events.length || 0  }}</td>
              <td>{{ user.commits.length }}</td>
              <td><a class="btn btn-warning" href="#" role="button" ng-click="toggle( user )">{{ user.active }}</a></td>
          </tr>
      </tbody>
    </table>
  </div>
</div>
<div ng-include="'components/footer/footer.html'"></div>
